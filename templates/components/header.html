<!-- Header Component -->
<!-- Header Simplificado Mobile First -->
<header class="sticky-top bg-white border-bottom shadow-sm" style="z-index: 1020;">
    <nav class="navbar navbar-expand py-2">
        <div class="container d-flex justify-content-between align-items-center">

            <!-- 1. Logo (Izquierda) -->
            <a class="navbar-brand d-flex align-items-center gap-2" href="{% url 'home' %}">
                <div class="jema-gradient rounded-circle d-flex align-items-center justify-content-center"
                    style="width: 38px; height: 38px;">
                    <i class="bi bi-shop text-white fs-6"></i>
                </div>
                <span class="fw-bold fs-5 jema-text-gradient">JEMA</span>
            </a>

            <!-- 2. Menú Derecha (Solo Login/Perfil) -->
            <div class="d-flex align-items-center gap-2">
                {% if user.is_authenticated %}
                <!-- Usuario Logueado -->
                <div class="dropdown">
                    <button class="btn btn-light rounded-circle p-0"
                        style="width: 38px; height: 38px; border: 2px solid var(--jema-purple);"
                        data-bs-toggle="dropdown">
                        <span class="fw-bold text-jema-purple">{{ user.username|slice:":1"|upper }}</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end shadow-lg border-0 rounded-3 p-2">
                        <li><a class="dropdown-item" href="{% url 'catalogo' %}"><i class="bi bi-grid-3x3 me-2"></i> Ir
                                al Catálogo</a></li>
                        {% if user.is_staff %}
                        <li><a class="dropdown-item" href="{% url 'panel_home' %}"><i class="bi bi-gear me-2"></i>
                                Admin</a></li>
                        {% endif %}
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li>
                            <form method="post" action="{% url 'account_logout' %}">
                                {% csrf_token %}
                                <button type="submit" class="dropdown-item text-danger"><i
                                        class="bi bi-box-arrow-right me-2"></i> Salir</button>
                            </form>
                        </li>
                    </ul>
                </div>
                {% else %}
                <!-- Usuario NO Logueado (Botón llamativo) -->
                <a href="{% url 'account_login' %}" class="btn btn-sm btn-jema-primary rounded-pill px-3 fw-bold">
                    Ingresar <i class="bi bi-person-fill ms-1"></i>
                </a>
                {% endif %}
            </div>
        </div>
    </nav>
</header>

<style>
    .nav-link.active {
        color: var(--jema-purple) !important;
        font-weight: 600 !important;
    }

    .nav-link:hover {
        background-color: var(--muted);
        color: var(--jema-purple) !important;
    }

    .dropdown-item:hover {
        background-color: var(--muted);
    }

    .dropdown-toggle-no-caret::after {
        display: none;
    }
</style>