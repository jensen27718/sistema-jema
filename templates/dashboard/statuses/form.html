{% extends 'base_admin.html' %}

{% block title %}{{ title }} - JEMA{% endblock %}
{% block page_title %}{{ title }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="jema-card p-4">
            <form method="POST">
                {% csrf_token %}

                <div class="mb-3">
                    <label class="form-label fw-bold small text-muted">NOMBRE DEL ESTADO</label>
                    <input type="text" name="name" class="form-control" value="{{ object.name }}" required
                        placeholder="Ej: Empacando">
                </div>

                <div class="mb-3">
                    <label class="form-label fw-bold small text-muted">COLOR (HEX)</label>
                    <div class="d-flex gap-2">
                        <input type="color" class="form-control form-control-color" id="colorPicker"
                            value="{{ object.color|default:'#6B2D7B' }}" title="Elige un color">
                        <input type="text" name="color" id="colorInput" class="form-control"
                            value="{{ object.color|default:'#6B2D7B' }}" required
                            pattern="^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$">
                    </div>
                    <div class="form-text">Color del badge que se mostrará en los pedidos.</div>
                </div>

                <div class="mb-4">
                    <div class="form-check form-switch">
                        {% if object.is_default %}
                        <input class="form-check-input" type="checkbox" name="is_default" id="isDefault" checked>
                        {% else %}
                        <input class="form-check-input" type="checkbox" name="is_default" id="isDefault">
                        {% endif %}
                        <label class="form-check-label" for="isDefault">Asignar automáticamente a nuevos pedidos</label>
                    </div>
                </div>

                <div class="d-flex gap-2 pt-2">
                    <button type="submit" class="btn-jema-primary w-100">Guardar Estado</button>
                    <a href="{% url 'panel_status_list' %}" class="btn btn-light w-100">Cancelar</a>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    // Sincronizar inputs de color
    const picker = document.getElementById('colorPicker');
    const input = document.getElementById('colorInput');

    picker.addEventListener('input', (e) => input.value = e.target.value);
    input.addEventListener('input', (e) => picker.value = e.target.value);
</script>
{% endblock %}